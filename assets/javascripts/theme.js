function setAssetsWidth(e){var t=e||30;$(".gallery .assets").find(".asset").each(function(){t+=$(this).outerWidth(!0)}),$(".gallery .assets #assets_wrap").width(2*t),$(".gallery .assets").width(t)}function resizeImage(e){respUtils.device()&&positionGalleryImage(e,getComputedHeight());var t=$(this).width();$(this).parent().parent().find(".img").css("width",t)}function initMenuCollapsing(){$(".category").click(function(){$(".category_container").slideUp(190),$(this).hasClass("open_cat")?$(".category").removeClass("open_cat"):($(".category").removeClass("open_cat"),$(this).addClass("open_cat")),"none"==$(this).next(".category_container").css("display")&&$(this).next(".category_container").slideDown(220)}),$(".category").hover(function(){$(this).toggleClass("hover")},function(){$(this).toggleClass("hover")}),$(".category.open_cat").next().show()}function positionContent(){if($(".nav_container").length){var e,t,i,s=respUtils.device(),n=respUtils.mobile(),a=getComputedHeight();if("Full Browser Height"===_4ORMAT_DATA.theme.gallery_image_height&&resizeMenu(),n?(e=a,t=$(".nav:visible").height()):(e=respUtils.fullHeightModeOrDevice()?a:$("body").attr("id").replace("imgsize_",""),t=parseInt(e,10)+$(".social_icons").height()+parseInt($(".social_icons").css("margin-top").replace("px",""),10),s||(t+=$(".nav_container").offset().top)),s&&$("body").hasClass("gallery")&&(i=n?t+.025*getWindowSpace():.025*getWindowSpace(),$("#content .container").css({top:i,marginTop:"0"})),!n)if(s||!$("body").hasClass("listing")&&!$("body").hasClass("simple")||($("#content").css("top",$(".nav_container").offset().top-$(window).scrollTop()+"px"),window.innerWidth<=767?$("#content").css("margin-top",$(".nav_container").height()):$("#content").css("margin-top",0),$("body > .footer_text").css("top",$(".nav_container").offset().top-$(window).scrollTop()+"px")),$(window).height()<t+10){var o=$(window).height()-$(".social_icons").height()-parseInt($(".social_icons").css("marginTop").replace("px",""),10)-20;$(".nav_container").css({height:o,marginTop:"0",top:$("body").hasClass("listing")||$("body").hasClass("simple")?"0":$("#content").offset().top}),$("#content .container").css("padding-bottom",$(".social_icons").height()+2*parseInt($(".social_icons").css("marginTop").replace("px",""),10))}else if(($("body").hasClass("listing")||$("body").hasClass("simple")||$("body").hasClass("client"))&&"imgsize_fullbrowserheight"==$("body").attr("id")){var o=$(window).height()-$(".social_icons").height()-parseInt($(".social_icons").css("marginTop").replace("px",""),10)-20;$(".nav_container").css({height:o,marginTop:"0"}),$("#content .container").css("padding-bottom",$(".social_icons").height()+2*parseInt($(".social_icons").css("marginTop").replace("px",""),10))}else $(".nav").css("min-height",""),$(".nav_container").css({height:"",marginTop:"",top:""}),$("#content .container").css("padding-bottom","")}}function initGallery(){initialHash=""!==location.hash?parseInt(location.hash.slice(1)):0;var e=respUtils.device();if(e||($(".container").length&&$(".container").css("padding-left",parseInt($(".container").css("padding-left").replace("px",""))+parseInt($(".nav").css("left").replace("px",""))+"px"),enable_scrolling(),$("html").hasClass("ie8")&&setMarginTop()),_4ORMAT_DATA.theme.nav_arrows_toggle){enough_assets=$(".asset").length>1,enough_assets?$("#content").mousemove(customCursor):$("html").hasClass("ie8")&&$(".ie-prev, .ie-next").hide();var t=$("#content");"Thin"===_4ORMAT_DATA.theme.nav_arrow_thickness?t.addClass("cursor_s"):"Medium"===_4ORMAT_DATA.theme.nav_arrow_thickness?t.addClass("cursor_m"):"Thick"===_4ORMAT_DATA.theme.nav_arrow_thickness&&t.addClass("cursor_l"),"Light"===_4ORMAT_DATA.theme.nav_arrow_style?t.addClass("cursor_white"):"Dark"===_4ORMAT_DATA.theme.nav_arrow_style&&t.addClass("cursor_black"),$("html").hasClass("ie8")?($(".ie-prev").click(function(){return activeSlideIndex>=0&&(activeSlideIndex-=1),activeSlideIndex<0&&(activeSlideIndex=0),$("a.image_text.opened").click(),moveSlider(activeSlideIndex),$(".embed_container iframe").remove(),!1}),$(".ie-next").click(function(){return activeSlideIndex<slideAssetsLength&&(activeSlideIndex+=1),activeSlideIndex>slideAssetsLength&&(activeSlideIndex=slideAssetsLength),$("a.image_text.opened").click(),moveSlider(activeSlideIndex),$(".embed_container iframe").remove(),!1})):$("#content").bind("click",function(t){if(enough_assets&&!e&&!($(t.target).hasClass("image_text")||$(t.target).hasClass("image_text_container")||1===$(t.target).parents(".image_text_container").length||$(t.target).closest("a").length))return $(this).hasClass("cursor_left")&&(activeSlideIndex-=1),$(this).hasClass("cursor_right")&&(activeSlideIndex+=1),activeSlideIndex<0&&(activeSlideIndex=0),activeSlideIndex>slideAssetsLength&&(activeSlideIndex=slideAssetsLength),$(".embed_container iframe").remove(),moveSlider(activeSlideIndex),customCursor(t),!1}),$("body").keydown(function(e){37==e.keyCode&&(activeSlideIndex-=1),39==e.keyCode&&(activeSlideIndex+=1),37!=e.keyCode&&39!=e.keyCode||(activeSlideIndex<0&&(activeSlideIndex=0),activeSlideIndex>slideAssetsLength&&(activeSlideIndex=slideAssetsLength),setLocationHash(activeSlideIndex),moveSlider(activeSlideIndex),$(".embed_container iframe").remove(),e.preventDefault())})}e||"Full Browser Height"==_4ORMAT_DATA.theme.gallery_image_height||$(document).on("lazybeforeunveil",function(e){setTimeout(function(){var t=$(e.target);t.parents(".asset").removeClass("loading").addClass("image-loaded"),t.parent().next().width(t.width()-10),setTimeout(function(){resizeImage(this),setAssetsWidth()},10)},5)}),$(".asset img").load(function(e){var t=$(e.target);t.parent().next().width(t.width()-10),setAssetsWidth()}),$(".asset.image img").load(function(){resizeImage(this)}),$(".caption_cta, .caption_close").on("click",function(){$(this).closest(".asset").toggleClass("show-caption")}),$(window).load(function(){$(".asset.txt .wrap").jScrollPane(),e||"Full Browser Height"==_4ORMAT_DATA.theme.gallery_image_height||$(".asset.title .wrap").jScrollPane(),$("body").hasClass("gallery")&&($(window).scroll($.debounce(500,setActiveSlide)),$("#content").scroll($.debounce(500,setActiveSlide)),setTimeout(function(){loadSlideAtIndex(initialHash)},100))}),(e||"Full Browser Height"==_4ORMAT_DATA.theme.gallery_image_height)&&setFullBrowserHeight()}function initListing(){$("body").hasClass("listing")&&(resizeListing(),$(".masonry").length&&$(".masonry").masonry(),animationCascade())}function initClient(){}function initStore(){}function resizeMenu(){var e=$(window).height()-$("#logo").outerHeight(!0)-$(".nav_container > .social_icons").outerHeight(!0)-30;$(".main_nav").height(e)}function resizeListing(){var e,t=$(".assets"),i=["two-columns","three-columns","four-columns","five-columns"],s=i.join(" "),n=["Large","Medium","Small","Auto"],a=[0,500,750,900],o=n.indexOf(_4ORMAT_DATA.theme.listing_thumbnail_size)+1,l=t.width(),r=e;if(l>a[o])e=o;else for(var c=0;c<3;c++)if(l>=a[c]&&l<=a[c+1]){e=c;break}r!=e&&(t.removeClass(s),t.addClass(i[e]),r=e)}function animationCascade(){"listing"==_4ORMAT_DATA.page.type&&($("._4ORMAT_content_wrapper").removeClass("content-loaded"),$(".asset, .title-element").each(function(e){var t=$(this);setTimeout(function(){t.addClass("asset-loaded")},100*e)}))}function setFullBrowserHeightListener(e,t){var i=$(e.target);if(i.load(setAssetsWidth()),i.parents(".asset").removeClass("loading").addClass("image-loaded"),!t){var s=i.parent().next().outerHeight(!0);captions.push(s)}var n=getComputedHeight();setVideoHeight(),t?$(".asset.img").not(".loading").find("img").css("height",n):$(".asset").not(".loading").find("img").css("height",n),lazySizes.autoSizer.checkElems()}function setFullBrowserHeight(){var e=respUtils.device();$("body.gallery").length&&($("body, html").css("overflow-y","hidden"),$("#content .container").css({position:"absolute",marginTop:"0",paddingBottom:0,top:0}),setAssetsSize(),positionContent(),$(window).resize(function(){mobileMenu.isVisible()?mobileMenu.hide():renderGallery(),setMarginTop(),respUtils.device()&&window.scrollTo(0,0)}),$(".lazyloaded").each(function(){$(this).parents(".asset").removeClass("loading").addClass("image-loaded"),setAssetsSize(),lazySizes.autoSizer.checkElems()}),$(document).on("lazybeforeunveil",function(t){setTimeout(setFullBrowserHeightListener(t,e),5)}))}function setVideoHeight(){$(".asset.video").each(function(){var e=$(this).find(".preview");(e.hasClass("vimeo_cont")||e.hasClass("youtube_cont"))&&positionGalleryVideo($(this),e)})}function getWindowSpace(){return respUtils.mobile()?window.innerHeight-$(".nav:visible").height():$(window).height()}function getComputedHeight(){return respUtils.device()?.95*getWindowSpace():getWindowSpace()-Math.max.apply(Math,captions)}function setAssetsSize(e){captions=[];var t,i,s=0,n=respUtils.device(),a=globalWindowSpace;a=a>1200?1200:a,n&&(a=getComputedHeight()),$(".asset").each(function(){var e=$(this);e.hasClass("image")&&!n?(t=e.find(".image_text_container").outerHeight(!0),captions.push(t)):e.hasClass("txt")?(i=e.css({height:a}).find(".wrap").css({height:a}),initOrReinitjScrollPane(i,{width:"",height:a})):e.hasClass("title")?e.find("img").length?(t=e.find(".asset_copy").outerHeight(!0),captions.push(t),n&&(i=e.css("height",a).find(".wrap").css("height",a),1===e.find(".inner_wrap").length&&initOrReinitjScrollPane(i,{width:"",height:a}))):(i=e.css("height",a).find(".wrap").css("height",a),initOrReinitjScrollPane(i,{width:"",height:a})):e.hasClass("video")&&(t=e.find(".copy").outerHeight(!0),captions.push(t))});var o=getComputedHeight();setVideoHeight(),n||$(".asset.title").find("img").css({height:o}),i=$(".asset.txt .wrap").height(o),initOrReinitjScrollPane(i,{width:"",height:o}),e&&$(".asset.image").not(".loading").find("img").each(function(){positionGalleryImage(this,o)}),"Full Browser Height"==_4ORMAT_DATA.theme.gallery_image_height&&$(".asset.image").not(".loading").each(function(){var e=$(this).find("img").width();$(this).width(e)}),$(".asset").each(function(){var e=$(this);s+=e.outerWidth(!0)}),n?($(".gallery .assets #assets_wrap").width(2*s).height(o),$(".gallery .assets").width(s).height(o)):($(".gallery .assets #assets_wrap").width(2*s).height(getWindowSpace()),$(".gallery .assets").width(s).height(getWindowSpace())),"fullbrowserheight"==$("body").attr("id").split("_")[1]&&$("body").attr("id","imgsize_"+o),$(window).load(function(){setAssetsSize(!0)}),$(window).resize($.debounce(500,setAssetsSize.bind(null,!0)))}function enable_scrolling(){var e=function(){return"scrollingElement"in document?document.scrollingElement:-1!==navigator.userAgent.indexOf("WebKit")?document.body:document.documentElement};$(".container").mousewheel(function(t,i,s,n){var a=0,o=0;if(o=Math.abs(s)>=Math.abs(n)?-s:n,a=40*o,!$(t.target).parents(".jspScrollable").length)return $(window).width()<=1024?$("#content")[0].scrollLeft-=a:e().scrollLeft-=a,!1})}function setLocationHash(e){history.replaceState?history.replaceState(null,null,"#"+e):location.hash="#"+e}function loadSlideAtIndex(e){var t=0,i=$("#content .asset"),s=i.eq(e);$scrollEl=$(window).width()<=1024?$("#content"):$("html, body"),0===e?$scrollEl.scrollLeft(0):e===i.length-1?$scrollEl.scrollLeft($(".assets")[0].scrollWidth):(t=s.offset().left-Math.ceil((-s.width()+$(window).width())/2),$scrollEl.scrollLeft(t))}function moveSlider(e){var t=0,i=$(".asset");if("Slow"==_4ORMAT_DATA.theme.gallery_change_image_speed?t=800:"Normal"==_4ORMAT_DATA.theme.gallery_change_image_speed?t=550:"Fast"==_4ORMAT_DATA.theme.gallery_change_image_speed&&(t=400),0==$(i[e]).length)return!1;try{var s=$(i[e]),n=parseInt(s.position().left,10)+(s.outerWidth()/2-$(window).width()/2)+1;onScrollComplete=function(){activeSlideIndex=e,setLocationHash(activeSlideIndex),setTimeout(function(){activeSlideIndex<=0?$(".ie8 .gallery .ie-prev").hide():$(".ie8 .gallery .ie-prev").show(),activeSlideIndex>=slideAssetsLength?$(".ie8 .gallery .ie-next").hide():$(".ie8 .gallery .ie-next").show()},30)};var a=$(window).width()<=1024?$("#content"):$("html, body");if(n<0&&0==$window.scrollLeft())return onScrollComplete();a.stop().animate({scrollLeft:n},{queue:!1,duration:t,complete:onScrollComplete})}catch(i){var o=e>0?"+=350":"-=350";a.stop().animate({scrollLeft:o},{queue:!1,duration:t,complete:function(){activeSlideIndex=parseInt(location.hash.slice(1))}})}}function setActiveSlide(){var e=activeSlideIndex,t=$("#content .asset");if(t.length<=1)return setLocationHash(0),!1;var i=$(window),s=0;s=$(window).width()<=1024?$("#content")[0].scrollLeft:$(window).scrollLeft();var n=0,a=null;if(s<=t.eq(1).offset().left-Math.ceil((-t.eq(1).width()+$(window).width())/2)-1)n=0,a=t.first(),activeSlideIndex=n,setLocationHash(n);else if(s>=t.last().offset().left-t.last().width()-1)n=t.length-1,a=t.eq(n),activeSlideIndex=n,setLocationHash(n);else{var o=document.elementFromPoint(i.width()/2,i.height()/2);a=$(o).find(".asset").length?t.eq(e):$(o).parents(".asset").length?$(o).parents(".asset"):$(o);var l=a.offset().left-Math.ceil((-a.width()+$(window).width())/2);s>=l&&(n=-1!==a.index()?a.index():activeSlideIndex,activeSlideIndex=n,setLocationHash(n))}}function customCursor(e){var t=$("#content");e.pageX-$(window).scrollLeft()>$(window).width()/2?t.addClass("cursor_right").removeClass("cursor_left"):t.addClass("cursor_left").removeClass("cursor_right");var i=parseInt(location.hash.slice(1));0===i?t.addClass("cursor_right").removeClass("cursor_left"):i===slideAssetsLength&&t.addClass("cursor_left").removeClass("cursor_right")}function setMarginTop(){$(".ie-next, .ie-prev").css({top:$("#content").offset().top+$(window).height()/2-$(".ie-prev").outerHeight()/2})}function renderGallery(){setAssetsSize(!0),positionContent()}function initOrReinitjScrollPane(e,t){var i=$(e),s=i.parent(),n=i.data("jsp");n&&(n.destroy(),i=s.find(".wrap")),i.css(t||{width:"",height:""}),i.jScrollPane()}function setImageSizingStrategy(e){var t=e.data("aspect-ratio"),i=t.split(":"),s=parseInt(i[0],10),n=parseInt(i[1],10),a=s/n;return setItemSizingStrategy(e,a),{width:s,height:n,aspectRatio:a}}function setVideoSizingStrategy(e){var t=e.data("video-ratio");setItemSizingStrategy(e,parseFloat(t))}function setItemSizingStrategy(e,t){e.data("sizing")||(t>=.93?e.attr("data-sizing",ASPECT_RATIO_LANDSCAPE):e.attr("data-sizing",ASPECT_RATIO_PORTRAIT))}function positionGalleryImage(e,t){var i=$(e),s="fit-width",n="fit-height",a=n,o=_4ORMAT_DATA.theme.gallery_full_height_mobile&&$("html").hasClass("mobile");if(imgInfo=setImageSizingStrategy(i),!respUtils.device())return void i.css("height",t);window.matchMedia("(orientation: portrait)").matches;if(i.data("sizing")===ASPECT_RATIO_LANDSCAPE){var l,r;viewportWidth=viewportWidth||window.innerWidth,l=.85*viewportWidth,r=l*imgInfo.height/imgInfo.width,t>=r&&(a=s)}a===s&&!o&&"Full Browser Height"!==_4ORMAT_DATA.theme.gallery_image_height||a===s&&!o&&respUtils.device()?i.css({width:"",height:"auto",marginTop:.5*(t-i.height())+"px"}):i.css({width:"auto",height:t,marginTop:""})}function positionGalleryVideo(e,t){var i=parseFloat(e.data("video-ratio")),s=getComputedHeight();if(respUtils.device()){var n,a,o="fit-width",l="fit-height",r=l;window.matchMedia("(orientation: portrait)").matches;setVideoSizingStrategy(e),e.data("sizing")===ASPECT_RATIO_LANDSCAPE&&(n=.9*window.innerWidth,a=n/i,s>=a&&(r=o)),r===o?(t.css({width:n,height:a}),e.css({width:n,height:a,marginTop:.5*(s-a)+"px"})):(n=s*i,a=s,t.css({width:n,height:a}),e.css({width:n,height:a,marginTop:""}))}else{var a=s,n=s*i;t.css({height:a,width:n}),e.width(n)}}function disablePinchZoom(){0===window.outerWidth&&window.addEventListener("touchmove",function(e){1!==e.scale&&e.preventDefault()},{passive:!1})}var activeSlideIndex=0,initialHash=0,slideAssetsLength=0,enough_assets=null,captions=[],ASPECT_RATIO_PORTRAIT="portrait",ASPECT_RATIO_LANDSCAPE="landscape",viewportWidth,globalWindowSpace,respUtils=window._4ORMAT.importResponsiveUtilities(),mobileMenu=window._4ORMAT.importMobileMenu();$(document).ready(function(){$(document).on("lazybeforesizes",function(e){var t=respUtils.device();if("Full Browser Height"===_4ORMAT_DATA.theme.gallery_image_height&&!t){var i=parseInt($.trim($(e.target).attr("data-asset-width")),10);e.originalEvent.detail.width=i||e.originalEvent.detail.width}}),globalWindowSpace=getWindowSpace(),$("body").hasClass("listing")&&initListing(),mobileMenu.setup({menuSelector:".nav",navSelector:".menu_wrap"}),setAssetsWidth(),viewportWidth=window.innerWidth,slideAssetsLength=$(".asset").length-1,$("body").hasClass("gallery")&&initGallery(),$("body").hasClass("listing")&&initListing(),$("body").hasClass("client")&&initClient(),($("body").hasClass("store")||$("body").hasClass("product")||$("body").hasClass("order_confirmation")||$("body").hasClass("order_thank_you")||$("body").hasClass("order_download"))&&initStore(),$("body").hasClass("basic")||($(".category").each(function(){$(this).next().next().hasClass("category")||$(this).addClass("list_end_cat")}),$(".menu_wrap").hasClass("collapsable")?initMenuCollapsing():$(".category").addClass("open_cat"),$(".nav_container").css("overflow","visible"),$(window).load(function(){positionContent(),$("#content").addClass("loaded"),respUtils.mobile()||$("ul.social_icons").fadeIn(),$(window).bind("resize",function(){viewportWidth=window.innerWidth,positionContent()})})),$("body").hasClass("gallery")||(respUtils.tablet()&&"Full Browser Height"!=_4ORMAT_DATA.theme.gallery_image_height&&$("#content, #content_page_outer").css("top",$(".nav_container:visible").position().top-275),respUtils.mobile()&&$("#content, #content_page_outer").css("top",$(".nav_container:visible").height()))}),$(window).on("resize",function(){$("body").hasClass("listing")&&resizeListing(),"Full Browser Height"===_4ORMAT_DATA.theme.gallery_image_height&&resizeMenu()}),$(document).on("lazybeforeunveil",function(e){var t=respUtils.device();$("body").hasClass("gallery")&&("Full Browser Height"===_4ORMAT_DATA.theme.gallery_image_height||t)&&setTimeout(setFullBrowserHeightListener(e,t),5)});var $window=$(window);$(function(){if($("body").hasClass("gallery")){var e=0,t=0;$(document).bind("touchstart",function(i){e=i.originalEvent.touches.item(0).clientY,t=i.originalEvent.touches.item(0).clientX}),$(document).bind("touchmove",function(i){var s=e-i.originalEvent.touches.item(0).clientY,n=t-i.originalEvent.touches.item(0).clientX;if(e=i.originalEvent.touches.item(0).clientY,t=i.originalEvent.touches.item(0).clientX,$(i.target).closest(".menu_wrap").length||$(i.target).closest(".image_text_container").length||$(i.target).closest(".copy").length)return!0;Math.abs(s)>Math.abs(.6*n)&&i.preventDefault()})}}),"gallery"===_4ORMAT_DATA.page.type&&disablePinchZoom();